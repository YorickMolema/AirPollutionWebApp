<div class="container">
  <mat-grid-list cols="40" rowHeight="fit">
    <mat-grid-tile
      [colspan]="40"
      [rowspan]="5"
      [style.background]="color">
      <mat-form-field appearance="fill">
        <mat-label>Select city</mat-label>
        <mat-select (selectionChange)="selectedOneCity()" [(ngModel)]="selectedCity">
          <mat-option *ngFor="let city of citiesList" [value]="city">
            {{city.Name}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="fill" *ngIf="selectedCity">
        <mat-label>Select station</mat-label>
        <mat-select (selectionChange)="selectedOneStation()" [(ngModel)]="selectedStation">
          <mat-option *ngFor="let station of stationList" [value]="station">
            {{station.Street}}
          </mat-option>
        </mat-select>
      </mat-form-field>


      <ng-container *ngIf="selectedStation">
        <div *ngIf="selectedStation && selectedCity">
        </div>
        <mat-form-field appearance="fill">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
            <input matStartDate formControlName="start" placeholder="Start date">
            <input matEndDate formControlName="end" placeholder="End date">
          </mat-date-range-input>
          <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-date-range-picker #picker
                                 (closed)="setMonthAndYear()"
                                 startView="month"
                                 [startAt]="openingDate"
          ></mat-date-range-picker>
          <mat-error *ngIf="range.controls['start']?.hasError('matStartDateInvalid')">Invalid start date</mat-error>
          <mat-error *ngIf="range.controls['end']?.hasError('matEndDateInvalid')">Invalid end date</mat-error>
        </mat-form-field>

      </ng-container>
      <ng-container *ngIf="validDateSelected">
        <section class="example-section">
  <span class="example-list-section">
    <ul>
      <mat-radio-group [(ngModel)]="selectedAverage">
        <li *ngFor="let average of this.averages">
          <mat-radio-button class="example-radio-button" [value]="average" (change)="updateOnAverage()">
          {{average}}
          </mat-radio-button>
        </li>
      </mat-radio-group>
      <li>
        <mat-checkbox [(ngModel)]="simulationIsRunning"
                      (change)="checkSimulationStart($event)"
                      checked="false" >
          Play simulation {{simulationIsRunning}}
        </mat-checkbox>
      </li>
    </ul>
  </span>
        </section>
      </ng-container>


      <ng-container *ngIf="simulationIsRunning">
        {{simulationTime}}
      </ng-container>


      <ng-container *ngIf="validDateSelected">
        <section class="example-section">
  <span class="example-list-section">
    <ul>
      <li *ngFor="let sensor of this.allAvailableSensors">
        <mat-checkbox [(ngModel)]="sensor.Selected"
                      (change)="updateAllSensorsSelected(sensor);">
          {{sensor.Name}}
        </mat-checkbox>
      </li>
    </ul>
  </span>
        </section>
      </ng-container>
    </mat-grid-tile>
    <mat-grid-tile
      [colspan]="25"
      [rowspan]="20"
      [style.background]="color">
      <div class="graphContainer">
        <ng-container *ngIf="this.selectedSensors.length > 0">
          <google-chart #chart *ngFor="let entry of this.selectedSensors"
                        [title]="'Level of ' + entry.name + ' over time'"
                        [type]="typeLine"
                        [data]="entry.allFilteredMeasurements"
                        [columns]="['Data', entry.name, entry.name + 'Processed']"
                        [options]="optionsLine"
                        [width]="width"
                        [height]="height">
          </google-chart>
        </ng-container>
      </div>
    </mat-grid-tile>
    <mat-grid-tile
      [colspan]="15"
      [rowspan]="20"
      [style.background]="color">
      <ng-container *ngIf="this.AverageAQIValue > 0">
        <google-chart #chart
                      [title]="'AQI'"
                      [type]="typeGauge"
                      [data]="[[this.AverageAQIValue]]"
                      [columns]="['AQI']"
                      [options]="optionsGauge"
                      [width]="width"
                      [height]="height">
        </google-chart>
      </ng-container>
    </mat-grid-tile>


  </mat-grid-list>
</div>
